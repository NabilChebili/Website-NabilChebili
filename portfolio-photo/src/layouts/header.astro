---
import "../styles/layout.css";

const {
	title = "Nabil Chebili",
	description =
		"Portfolio de Nabil Chebili : Cloud & DevOps (Azure), photographie et musique. Projets, retours d’expérience et galeries.",
	image = "/LogoRond.svg",
	ogType = "website",
} = Astro.props;

const siteUrl = Astro.site ?? new URL("https://www.nabilchebili.fr");
const canonicalUrl = Astro.url && siteUrl ? new URL(Astro.url.pathname, siteUrl).href : undefined;
const ogImageUrl = siteUrl ? new URL(image, siteUrl).href : image;

const fullTitle = String(title).includes("Nabil Chebili") ? String(title) : `${title} — Nabil Chebili`;

const schemaPerson = {
	"@context": "https://schema.org",
	"@type": "Person",
	name: "Nabil Chebili",
	url: siteUrl?.href,
	image: ogImageUrl,
	jobTitle: "Ingénieur Cloud / DevOps",
	sameAs: ["https://www.linkedin.com/in/chebili-nabil/"],
};

const schemaWebsite = {
	"@context": "https://schema.org",
	"@type": "WebSite",
	name: "Nabil Chebili",
	url: siteUrl?.href,
};
---

<!doctype html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="/LogoRond.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{fullTitle}</title>
		<meta name="description" content={description} />
		<meta name="robots" content="index,follow" />
		{canonicalUrl ? <link rel="canonical" href={canonicalUrl} /> : null}

		<meta property="og:site_name" content="Nabil Chebili" />
		<meta property="og:title" content={fullTitle} />
		<meta property="og:description" content={description} />
		{canonicalUrl ? <meta property="og:url" content={canonicalUrl} /> : null}
		<meta property="og:type" content={ogType} />
		<meta property="og:image" content={ogImageUrl} />

		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content={fullTitle} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={ogImageUrl} />

		<script type="application/ld+json">{JSON.stringify(schemaPerson)}</script>
		<script type="application/ld+json">{JSON.stringify(schemaWebsite)}</script>
	</head>
	<body>
		<header class="site-header">
			<div class="container header-inner">
				<div class="brand">
					<a href="/">Nabil Chebili</a>
				</div>
				<div class="nav-wrap">
					<a class="nav-home" href="/">Accueil</a>
					<button class="nav-toggle" aria-expanded="false" aria-controls="site-nav" aria-label="Ouvrir le menu">
						<span class="hamburger" aria-hidden="true">☰</span>
					</button>
					<nav id="site-nav" class="site-nav" aria-label="Sections">
						<a href="/clouddevops">Cloud DevOps</a>
						<a href="/photo">Photo</a>
						<a href="/musique">Musique</a>
						<a href="/gaming">Gaming</a>
					</nav>
				</div>
			</div>
		</header>

		<main>
			<slot />
		</main>

		<section class="section footer-nav">
			<div class="container">
				<nav aria-label="Navigation finale">
				<a href="/photo">Photographie</a> · <a href="/clouddevops">Cloud DevOps</a> · <a
					href="/musique">Musique</a
				> · <a href="/gaming">Gaming</a>
				</nav>
			</div>
		</section>

		<footer class="site-footer">
			<div class="container">© {new Date().getFullYear()} — Nabil Chebili</div>
		</footer>

		<script>
			(function () {
				const btn = document.querySelector('.nav-toggle');
				const nav = document.getElementById('site-nav');
				const wrap = document.querySelector('.nav-wrap');
				if (!btn || !nav || !wrap) return;
				btn.addEventListener('click', () => {
					const expanded = btn.getAttribute('aria-expanded') === 'true';
					btn.setAttribute('aria-expanded', String(!expanded));
					nav.classList.toggle('open');
					wrap.classList.toggle('open');
				});
			})();
		</script>
	</body>
</html>
